// https://github.com/unscriptable/curl v.0.5.4
const r = !0;
const w = null;
const B = !1;
(function (s, h, p) {
  let l;
  let g;
  function q(a, b) {
    return V.call(a).indexOf(`[object ${b}`) == 0;
  }
  function E(a) {
    function b(b) {
      if (b in a)
        return (
          (b =
            a[b].charAt(0) != '.'
              ? (!a.path || x(a.path) ? a.path : `${a.path}/`) + a[b]
              : F(a[b], a.path)),
          k(b)
        );
    }
    q(a, 'String') &&
      ((a = k(a)),
      (a = {
        name: a,
        path: a,
        main: l,
        lib: g,
      }));
    a.path = a.path || '';
    a.h = b('lib');
    a.i = b('main');
    return a;
  }
  function n(a) {
    let b;
    let f;
    let e;
    const j = [];
    G = a.baseUrl || '';
    if (a.debug)
      ((K = r),
        (z.cache = t),
        (z.cfg = a),
        (z.undefine = function (a) {
          delete t[a];
        }));
    let i = a.paths;
    for (b in i) {
      ((f = k(b.replace('!', '!/'))),
        (e = H[f] = { path: k(i[b]) }),
        (e.f = (e.path.match(N) || []).length),
        j.push(f));
    }
    i = a.packages;
    for (b in i)
      ((f = k(i[b].name || b)),
        (e = H[f] = E(i[b])),
        (e.f = (e.path.match(N) || []).length),
        j.push(f));
    O = RegExp(
      `^(${j
        .sort((a, b) => H[a].f < H[b].f)
        .join('|')
        .replace(/\//g, '\\/')})(?=\\/|$)`,
    );
    C = a.pluginPath || C;
  }
  function A() {}
  function v(a) {
    function b(a, b) {
      return W(a, b || A, j);
    }
    function f(a) {
      return m(o(F(a, e)), G);
    }
    var e = a.substr(0, a.lastIndexOf('/'));
    var j = { baseName: e };
    const i = {};
    j.d = { exports: i, module: { id: F(a, e), uri: f(a), exports: i } };
    K && (b.curl = z);
    j.e = j.d.require = b;
    b.toUrl = f;
    return j;
  }
  function y() {}
  function d(a) {
    y.prototype = a;
    a = new y();
    y.prototype = L;
    return a;
  }
  function D() {
    function a(a, b) {
      i.push([a, b]);
    }
    function b(a) {
      e(r, a);
    }
    function f(a) {
      e(B, a);
    }
    function e(e, j) {
      a = e
        ? function (a) {
            a && a(j);
          }
        : function (a, b) {
            b && b(j);
          };
      b = f = function () {
        throw Error('Promise already completed.');
      };
      for (var c, d = 0; (c = i[d++]); ) (c = c[e ? 0 : 1]) && c(j);
    }
    const j = this;
    var i = [];
    this.c = function (b, e) {
      a(b, e);
    };
    this.b = function (a) {
      j.m = a;
      b(a);
    };
    this.a = function (a) {
      j.p = a;
      f(a);
    };
  }
  function u(a) {
    D.apply(this);
    this.name = a;
  }
  function x(a) {
    return a.charAt(a.length - 1) == '/';
  }
  function k(a) {
    return x(a) ? a.substr(0, a.length - 1) : a;
  }
  function o(a, b) {
    function f(a) {
      j = a.replace(O, (b) => {
        e = H[b] || {};
        i = r;
        return e.i && b == a ? e.i : e.h ? e.h : e.path || '';
      });
    }
    let e;
    let j;
    let i;
    b && f(`${b}!/${a}`);
    i || f(a);
    return j;
  }
  function m(a, b, f) {
    return (
      (b && !X.test(a) ? (!b || x(b) ? b : `${b}/`) + a : a) +
      (f && !Y.test(a) ? '.js' : '')
    );
  }
  function c(a, b, f) {
    const e = h.createElement('script');
    e.type = 'text/javascript';
    e.onload = e[P] = function (f) {
      f = f || s.event;
      if (f.type === 'load' || Z[this.readyState]) {
        (delete M[a.name], (this.onload = this[P] = this.onerror = w), b(e));
      }
    };
    e.onerror = function () {
      f(Error(`Syntax error or http error: ${a.url}`));
    };
    e.charset = a.charset || 'utf-8';
    e.async = r;
    e.src = a.url;
    M[a.name] = e;
    Q.insertBefore(e, Q.firstChild);
  }
  function $(a) {
    let b;
    let f;
    let e;
    let j;
    const i = a.length;
    e = a[i - 1];
    j = q(e, 'Function');
    i == 2
      ? q(a[0], 'Array')
        ? (f = a[0])
        : (b = a[0])
      : i == 3 && ((b = a[0]), (f = a[1]));
    !f && j && e.length > 0 && (f = ['require', 'exports', 'module']);
    return {
      name: b,
      k: f || [],
      l: j
        ? e
        : function () {
            return e;
          },
    };
  }
  function R(a, b) {
    K && console && console.log('curl: resolving', a.name);
    const f = v(a.baseName || a.name);
    S(
      b.k,
      f,
      (e) => {
        try {
          var j = b.l.apply(f.d.exports, e) || f.d.exports;
          K &&
            console &&
            console.log(
              'curl: defined',
              a.name,
              j.toString().substr(0, 50).replace(/\n/, ' '),
            );
        } catch (i) {
          a.a(i);
        }
        a.b(j);
      },
      a.a,
    );
  }
  function T(a) {
    c(
      a,
      () => {
        const b = I;
        I = L;
        a.n !== B &&
          (b
            ? b.g
              ? a.a(Error(b.g.replace('${url}', a.url)))
              : R(a, b)
            : a.a(Error(`define() not found or duplicates found: ${a.url}`)));
      },
      a.a,
    );
  }
  function F(a, b) {
    return a.replace(
      aa,
      (a, e, j) => `${j ? b.substr(0, b.lastIndexOf('/')) : b}/`,
    );
  }
  function ba(a, b) {
    let f;
    let e;
    let j;
    let i;
    let c;
    let h;
    e = a.indexOf('!');
    if (e >= 0) {
      j = a.substr(0, e);
      i = a.substr(e + 1);
      let g = o(j);
      g.indexOf('/') < 0 && (g = o((!C || x(C) ? C : `${C}/`) + g));
      let k = t[j];
      if (!k)
        ((k = t[j] = new u(j)), (k.url = m(g, G, r)), (k.baseName = g), T(k));
      b = v(b.baseName);
      b.e.toUrl = function (a) {
        a = o(a, j);
        return m(a, G);
      };
      h = d(j ? p.plugins && p.plugins[j] : p) || {};
      const l = function (a) {
        return F(a, b.baseName);
      };
      c = new u(a);
      k.c((d) => {
        let g;
        i = a.substr(e + 1);
        i = 'normalize' in d ? d.normalize(i, l, h) : l(i);
        f = `${j}!${i}`;
        g = t[f];
        if (!g) {
          g = new u(f);
          i && !d.dynamic && (t[f] = g);
          const m = g.b;
          m.resolve = m;
          m.reject = g.a;
          d.load(i, b.e, m, h);
        }
        g.c(c.b, c.a);
      }, c.a);
    } else if (((i = f = F(a, b.baseName)), (c = t[i]), !c))
      ((c = t[i] = new u(i)), (c.url = m(o(i), G, r)), T(c));
    return c;
  }
  function S(a, b, f, e) {
    for (var c = [], i = a.length, d = i, g = B, m = 0; m < d && !g; m++)
      (function (a, d) {
        d in b.d
          ? ((c[a] = b.d[d]), i--)
          : d
            ? ba(d, b).c(
                (b) => {
                  c[a] = b;
                  --i == 0 && ((g = r), f(c));
                },
                (a) => {
                  g = r;
                  e(a);
                },
              )
            : i--;
      })(m, a[m]);
    i == 0 && !g && f(c);
  }
  function W(a, b, f) {
    if (q(a, 'String')) {
      f = (f = t[a]) && f.m;
      if (f === L) throw Error(`Module is not already resolved: ${a}`);
      return f;
    }
    S(
      a,
      f,
      (a) => {
        b.b ? b.b(a) : b.apply(w, a);
      },
      (a) => {
        if (b.a) b.a(a);
        else throw a;
      },
    );
  }
  function z() {
    let a = ca.call(arguments);
    let b;
    let f;
    q(a[0], 'Object') && ((p = a.shift()), n(p));
    b = [].concat(a[0]);
    a = a[1];
    f = v('');
    let e = new D();
    const c = {};
    c.then = function (a, b) {
      e.c(
        (b) => {
          a && a.apply(w, b);
        },
        (a) => {
          if (b) b(a);
          else throw a;
        },
      );
      return c;
    };
    c.next = function (a, b) {
      const d = e;
      e = new D();
      d.c(
        () => {
          f.e(a, e, f);
        },
        (a) => {
          e.a(a);
        },
      );
      b &&
        e.c(function (a) {
          b.apply(this, a);
        });
      return c;
    };
    a && c.then(a);
    f.e(b, e, f);
    return c;
  }
  function U() {
    const a = $(arguments);
    let b = a.name;
    if (b == w) {
      if (I !== L) I = { g: 'Multiple anonymous defines found in ${url}.' };
      else {
        var c;
        if (!q(s.opera, 'Opera'))
          for (const e in M)
            if (M[e].readyState == 'interactive') {
              c = e;
              break;
            }
        if (!(b = c)) I = a;
      }
    }
    if (b != w)
      ((c = t[b]) || (c = t[b] = new u(b)),
        (c.n = B),
        'resolved' in c || R(c, a, v(b)));
  }
  var Q = h.head || h.getElementsByTagName('head')[0];
  let G;
  var C = 'curl/plugin';
  var H = {};
  var t = {};
  let I;
  var M = {};
  var V = {}.toString;
  let L;
  var ca = [].slice;
  var X = /^\/|^[^:]+:\/\//;
  var aa = /^(\.)(\.)?(\/|$)/;
  var N = /\//;
  var Y = /\?/;
  let O;
  var Z = { loaded: 1, interactive: 1, complete: 1 };
  var P = 'onreadystatechange';
  l = './lib/main';
  g = './lib';
  let K;
  q(p, 'Function') || n(p);
  let J;
  J = p.apiName || 'curl';
  (p.apiContext || s)[J] = z;
  t[J] = new u(J);
  t[J].b(z);
  s.define = z.define = U;
  z.version = '0.5.3';
  U.amd = { plugins: r, jQuery: r };
})(this, document, this.curl || {});
(function (s, h) {
  function p() {
    if (!h.body) return B;
    o || (o = h.createTextNode(''));
    try {
      return (h.body.removeChild(h.body.appendChild(o)), (o = k), r);
    } catch (d) {
      return B;
    }
  }
  function l() {
    let d;
    d = E[h[q]] && p();
    if (!v && d) {
      v = r;
      for (clearTimeout(x); (D = u.pop()); ) D();
      A && (h[q] = 'complete');
      for (var c; (c = n.shift()); ) c();
    }
    return d;
  }
  function g() {
    l();
    v || (x = setTimeout(g, y));
  }
  var q = 'readyState';
  var E = { loaded: 1, interactive: 1, complete: 1 };
  var n = [];
  var A = typeof h[q] !== 'string';
  var v = B;
  var y = 10;
  let d;
  let D;
  var u = [];
  let x;
  let k;
  let o;
  d =
    'addEventListener' in s
      ? function (d, c) {
          d.addEventListener(c, l, B);
          return function () {
            d.removeEventListener(c, l, B);
          };
        }
      : function (d, c) {
          d.attachEvent(`on${c}`, l);
          return function () {
            d.detachEvent(c, l);
          };
        };
  h &&
    !l() &&
    ((u = [d(s, 'load'), d(h, 'readystatechange'), d(s, 'DOMContentLoaded')]),
    (x = setTimeout(g, y)));
  define('curl/domReady', () => {
    function d(c) {
      v ? c() : n.push(c);
    }
    d.then = d;
    d.amd = r;
    return d;
  });
})(this, document);
(function (s, h) {
  function p(d, l, u) {
    function x(h) {
      h = h || s.event;
      if (h.type == 'load' || n[c.readyState])
        ((c.onload = c[A] = c.onerror = ''), !d.test || g(d.test) ? l(c) : k());
    }
    function k() {
      c.onload = c[A] = c.onerror = '';
      u && u(Error(`Script error or http error: ${d.url}`));
    }
    function o() {
      c.onload && n[c.readyState]
        ? x({})
        : c.onload && m < new Date()
          ? k()
          : setTimeout(o, 10);
    }
    let m;
    let c;
    m = new Date().valueOf() + 1e3 * (d.timeout || 300);
    c = h.createElement('script');
    u && d.test && setTimeout(o, 10);
    c.type = d.j || 'text/javascript';
    c.onload = c[A] = x;
    c.onerror = k;
    c.charset = d.charset || 'utf-8';
    c.async = d.async;
    c.src = d.url;
    v.insertBefore(c, v.firstChild);
  }
  function l(d, g) {
    p(
      d,
      (d) => {
        const h = q.shift();
        y = q.length > 0;
        h && l.apply(w, h);
        g.resolve(d);
      },
      (d) => {
        g.reject(d);
      },
    );
  }
  function g(d) {
    try {
      return (eval(`global.${d}`), r);
    } catch (g) {
      return B;
    }
  }
  var q = [];
  const E = h.createElement('script').async == r;
  var n = { loaded: 1, interactive: 1, complete: 1 };
  var A = 'onreadystatechange';
  var v = h.head || h.getElementsByTagName('head')[0];
  let y;
  define('js', {
    load(d, g, h, n) {
      let k;
      let o;
      let m;
      let c;
      k = d.indexOf('!order') > 0;
      o = d.indexOf('!test=');
      m = o > 0 && d.substr(o + 6);
      c = 'prefetch' in n ? n.prefetch : r;
      d = k || o > 0 ? d.substr(0, d.indexOf('!')) : d;
      d = {
        name: d,
        url: g.toUrl(d),
        async: !k,
        o: k,
        test: m,
        timeout: n.timeout,
      };
      g = h.resolve
        ? h
        : {
            resolve(c) {
              h(c);
            },
            reject(c) {
              throw c;
            },
          };
      if (k && !E && y) {
        if ((q.push([d, g]), c))
          ((d.j = 'text/cache'),
            p(
              d,
              (c) => {
                c.parentNode.removeChild(c);
              },
              B,
            ),
            (d.j = ''));
      } else ((y = y || k), l(d, g));
    },
  });
})(this, document);
(function (s) {
  const h = s.document;
  const p = /^\/\//;
  let l;
  if (h) l = h.head || (h.head = h.getElementsByTagName('head')[0]);
  define('link', {
    load(g, q, s, n) {
      let a;
      g = q.toUrl(g.lastIndexOf('.') <= g.lastIndexOf('/') ? `${g}.css` : g);
      ((a = g =
        (n =
          'fixSchemalessUrls' in n ? n.fixSchemalessUrls : h.location.protocol)
          ? g.replace(p, `${n}//`)
          : g),
        (n = a));
      g = h.createElement('link');
      g.rel = 'stylesheet';
      g.type = 'text/css';
      g.href = n;
      l.appendChild(g);
      s(g.sheet || g.styleSheet);
    },
  });
})(this);
define('domReady', ['curl/domReady'], (s) => ({
  load(h, p, l) {
    s(l);
  },
}));
